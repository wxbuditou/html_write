<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>答题</title>
    <script src="http://upcdn.b0.upaiyun.com/libs/jquery/jquery-2.0.2.min.js"></script>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        #div-btn{
           text-align: center;
        }
        #btn-ans{
            text-align: center;
            width: 150px;
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function(){
        	    /////////////调用数据库，将信息分题设置显示
        	
            $.get("/weather/produce_ans",
            	        function(data,status){
            	        //alert("数据: \n" + data + "\n状态: " + status);
            	        
            	        var data = eval('('+data+')');
            	        var mydate = new Date();
            	        var Time =  mydate.toLocaleDateString() + " "+mydate.getHours()+':'+ mydate.getMinutes() +':' +mydate.getSeconds();
            	        
            	        var que1 = data.question1;
            	        var que2 = data.question2;
            	        var que3 = data.question3;
            	        var que4 = data.question4;
            	        
            	        
            	        $("#t1").text(que1.question);
        				$("#a11").html(que1.optA);
        				$("#a12").html(que1.optB);
            	        $("#a13").html(que1.optC);
            	        $("#a14").html(que1.optD);
            	        
            	        
            	        $("#t2").text(que2.question);
        				$("#a21").html(que2.optA);
        				$("#a22").html(que2.optB);
            	        $("#a23").html(que2.optC);
            	        $("#a24").html(que2.optD);
            	        
            	        $("#t3").text(que3.question);
        				$("#a31").html(que3.optA);
        				$("#a32").html(que3.optB);
            	        $("#a33").html(que3.optC);
            	        $("#a34").html(que3.optD);
            	        
            	        $("#t4").text(que4.question);
        				$("#a41").html(que4.optA);
        				$("#a42").html(que4.optB);
            	        $("#a43").html(que4.optC);
            	        $("#a44").html(que4.optD);
            	        
            	        
            	        
            	    $("#btn-ans").click(function(){
        			var s1 = $("input[name=radiobutton1]:checked").val();
        			var s2 = $("input[name=radiobutton2]:checked").val();
        			var s3 = $("input[name=radiobutton3]:checked").val();
        			var s4 = $("input[name=radiobutton4]:checked").val();
        		var total =0;
        			    
            	  if (s1==que1.answer)
            	  	total+=25;
            	  if (s2==que2.answer)
            	  	total+=25;
            	  if (s3==que3.answer)
            	  	total+=25;
            	  if (s4==que4.answer)
            	  	total+=25;
            	  		
            	  $.ajax({
       			 type: "get",
       			 url: "/weather/data_store?score=" + total + "&time=" +Time,
       			 cache: false,
        		success: function(data, textStatus){
        	
          		
        		 },
        error: function(){
            alert("参数出错，请与管理员联系!");
        }           
    });		
            	  	
            	  		
            	  		
                alert("已交卷\n我的作答是:" + s1+s2+s3+s4 + "\n我的得分是: "+total+"分" +"\n当前提交时间:"+Time+"\n谢谢");
                ////提交后，匹配判断答案，将数据插入数据库
                
                
                
            });
        });
        	    
        	   
        });
    </script>
</head>
<body>
<div class="container">
<h3 align="center">第一题</h3>
<p id="t1"> 题目有待从数据库读取 </p>
    <input type="radio" name="radiobutton1" value="A" checked><span id="a11">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton1" value="B"><span id="a12">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton1" value="C"><span id="a13">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton1" value="D"><span id="a14">选项有待从数据库读取</span><br>
<h3 align="center">第二题</h3>
<p id="t2">题目有待从数据库读取</p>
    <input type="radio" name="radiobutton2" value="A" checked><span id="a21">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton2" value="B"><span id="a22">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton2" value="C"><span id="a23">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton2" value="D"><span id="a24">选项有待从数据库读取</span><br>
<h3 align="center">第三题</h3>
<p id="t3">题目有待从数据库读取</p>
    <input type="radio" name="radiobutton3" value="A" checked><span id="a31">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton3" value="B"><span id="a32">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton3" value="C"><span id="a33">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton3" value="D"><span id="a34">选项有待从数据库读取</span><br>
<h3 align="center">第四题</h3>
<p id="t4">题目有待从数据库读取</p>
    <input type="radio" name="radiobutton4" value="A" checked><span id="a41">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton4" value="B"><span id="a42">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton4" value="C"><span id="a43">选项有待从数据库读取</span><br>
    <input type="radio" name="radiobutton4" value="D"><span id="a44">选项有待从数据库读取</span><br>
          
    <br>
    <div id="div-btn">
    <button id="btn-ans" type="button" class="btn btn-success">交 卷</button>
    </div>
    <br>
    <br>
</div>
</body>
</html>